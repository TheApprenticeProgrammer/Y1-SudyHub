SET GLOBAL SQL_MODE = CONCAT(@@SQL_MODE, ',ONLY_FULL_GROUP_BY'); 

SELECT DISTINCT li.ID_S
FROM SPJ li
GROUP BY li.ID_S, li.ID_P
HAVING COUNT(DISTINCT li.ID_J) >= 3;
